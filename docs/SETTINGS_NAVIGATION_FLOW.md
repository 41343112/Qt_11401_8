# 設定界面導航流程 (Settings Interface Navigation Flow)

## 界面導航圖 (Interface Navigation Diagram)

```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│                      Qt Chess 主選單                         │
│                     (Main Menu)                             │
│                                                             │
│  ┌───────────────────────────────────────────────────┐     │
│  │          ♔ 國際象棋 ♚                              │     │
│  └───────────────────────────────────────────────────┘     │
│                                                             │
│  ┌───────────────────────────────────────────────────┐     │
│  │       🎮 本地遊玩                                   │     │
│  └───────────────────────────────────────────────────┘     │
│                                                             │
│  ┌───────────────────────────────────────────────────┐     │
│  │       🤖 與電腦對戰                                 │     │
│  └───────────────────────────────────────────────────┘     │
│                                                             │
│  ┌───────────────────────────────────────────────────┐     │
│  │       🌐 線上遊玩                                   │     │
│  └───────────────────────────────────────────────────┘     │
│                                                             │
│  ┌───────────────────────────────────────────────────┐     │
│  │       ⚙️ 設定                ◄─────────┐            │     │
│  └───────────────────────────────────────┼────────────┘     │
│                                          │                 │
└──────────────────────────────────────────┼─────────────────┘
                                           │
                                           │ 點擊「設定」
                                           │
                                           ▼
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│                      設定面板                                │
│                  (Settings Panel)                           │
│                                                             │
│  ┌───────────────────────────────────────────────────┐     │
│  │          ⚙️ 設定                                    │     │
│  └───────────────────────────────────────────────────┘     │
│                                                             │
│  ┌───────────────────────────────────────────────────┐     │
│  │      選擇要設定的項目：                              │     │
│  └───────────────────────────────────────────────────┘     │
│                                                             │
│  ┌───────────────────────────────────────────────────┐     │
│  │       🔊 音效設定                                   │────┐│
│  └───────────────────────────────────────────────────┘    ││
│                                                            ││
│  ┌───────────────────────────────────────────────────┐    ││
│  │       ♟ 棋子圖標設定                                │────┤│
│  └───────────────────────────────────────────────────┘    ││
│                                                            ││
│  ┌───────────────────────────────────────────────────┐    ││
│  │       🎨 棋盤顏色設定                               │────┤│
│  └───────────────────────────────────────────────────┘    ││
│                                                            ││
│  ┌───────────────────────────────────────────────────┐    ││
│  │       ← 返回主選單                                  │    ││
│  └───────────────────────────────────────────────────┘    ││
│                 │                                          ││
└─────────────────┼──────────────────────────────────────────┘│
                  │                                           │
                  │ 點擊「返回主選單」                           │
                  │                                           │
                  └───────────┐                               │
                              │                               │
                              │                               │
                              │              打開對應的設定對話框 │
                              │                               │
                              ▼                               ▼
                    ┌─────────────────┐          ┌──────────────────────┐
                    │   主選單         │          │  音效設定對話框       │
                    │  (Main Menu)    │          │  棋子圖標設定對話框   │
                    │                 │          │  棋盤顏色設定對話框   │
                    └─────────────────┘          └──────────────────────┘
```

## 狀態轉換 (State Transitions)

### 從主選單到設定面板

1. 使用者在主選單點擊「⚙️ 設定」按鈕
2. 系統調用 `onMainMenuSettingsClicked()`
3. `onMainMenuSettingsClicked()` 調用 `showSettingsPanel()`
4. `showSettingsPanel()` 隱藏主選單，顯示設定面板

### 從設定面板到主選單

1. 使用者在設定面板點擊「← 返回主選單」按鈕
2. 系統調用 `showMainMenu()`
3. `showMainMenu()` 隱藏設定面板，顯示主選單

### 從設定面板到設定對話框

1. 使用者在設定面板點擊任一設定按鈕（音效、棋子圖標、棋盤顏色）
2. 系統打開對應的設定對話框（SoundSettingsDialog、PieceIconSettingsDialog、BoardColorSettingsDialog）
3. 對話框以模態方式顯示，設定面板保持在背景
4. 使用者完成設定後關閉對話框
5. 設定面板重新顯示

## 代碼流程 (Code Flow)

### 初始化階段

```cpp
Qt_Chess::Qt_Chess()
{
    // ... 其他初始化代碼 ...
    
    setupUI();
    setupMainMenu();       // 設置主選單
    setupSettingsPanel();  // 設置設定面板
    
    // ... 其他初始化代碼 ...
    
    showMainMenu();        // 顯示主選單
}
```

### 導航階段

```cpp
// 點擊主選單的「設定」按鈕
void Qt_Chess::onMainMenuSettingsClicked() {
    showSettingsPanel();
}

// 顯示設定面板
void Qt_Chess::showSettingsPanel() {
    if (m_mainMenuWidget) {
        m_mainMenuWidget->hide();      // 隱藏主選單
    }
    if (m_gameContentWidget) {
        m_gameContentWidget->hide();   // 隱藏遊戲內容
    }
    if (m_settingsWidget) {
        m_settingsWidget->show();      // 顯示設定面板
    }
}

// 返回主選單
void Qt_Chess::showMainMenu() {
    if (m_mainMenuWidget) {
        m_mainMenuWidget->show();      // 顯示主選單
    }
    if (m_gameContentWidget) {
        m_gameContentWidget->hide();   // 隱藏遊戲內容
    }
    if (m_settingsWidget) {
        m_settingsWidget->hide();      // 隱藏設定面板
    }
}
```

## 優勢 (Advantages)

1. **一致性**: 設定面板與主選單使用相同的設計模式
2. **流暢性**: 無需彈出式對話框，直接切換界面
3. **可擴展性**: 易於添加新的設定選項
4. **使用者體驗**: 更直觀的導航流程
